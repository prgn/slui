package com.prao.ainterview.tmdb.automation.movies;
/*import com.cybozu.labs.langdetect.Detector; 
import com.cybozu.labs.langdetect.DetectorFactory; 
import com.cybozu.labs.langdetect.Language;*/
/**
 * Created by Pragna Rao on 02/06/2020.
 */
import static io.restassured.RestAssured.given;

import java.net.URI;

import org.apache.http.HttpStatus;
import org.testng.Assert;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import com.prao.ainterview.tmdb.automation.util.TmdbTestUtil;

import io.restassured.path.json.JsonPath;
import io.restassured.response.Response;

public class MoviesAPITest extends TmdbTestUtil{
	
	private static final String  INTRNL_LANG_CODE = "sa";
	URI popularMovieUri;
	/*
	private static final Long FQ_TIME_INTERVAL = (long) (15*60*1000);
	private static final Long TS_HOURLY_OFFSET = (long) (60*60*1000);
	private static final Long TS_DAILY_OFFSET = (long) (24*60*60*1000);
	private static final Long TS_MONTHLY_OFFSET = (long) (30*24*60*60*1000);
	private static final Long TS_MIN_OFFSET = (long) (15*60*1000);
	public static Properties context = null;*/
	
	
	private void setUp() {
		popularMovieUri = URI.create(getProperty("tmdb.base.uri")+ getProperty("popular.get.uri"));
		System.out.println (" uri " + popularMovieUri);
	}
	
	
	/**
	 * @throws Exception
	 * Verify International code works for supported fields :overview.
	 * expected status code :200 OK  
	 * api_key=fb54f1b85b06b34f0b5c921561fc3675&language=hi&page=1
	 */
	@Test
	public void testGetPopularMovieIdWorksForInternalLanguageCode() throws Exception {
		setUp();

		Response  response =	given().
				queryParam("api_key", getProperty("APIKey")).
				queryParam("language", INTRNL_LANG_CODE).expect().statusCode(200).
				when().
				get(popularMovieUri);
	
		JsonPath jsonPath = response.jsonPath();
		
		Assert.assertEquals(response.getStatusCode(),HttpStatus.SC_OK, "status code was not Httpstatus.SC_OK");
	}
	/**
	 * @throws Exception
	 * Verify International code works for 2 digitcode.
	 * expected status code :200 OK  
	 * api_key=fb54f1b85b06b34f0b5c921561fc3675&language=hi&page=1
	 */
	@Test
	public void testGetPopularMovieIdWorksFor2DigitCode() throws Exception {
		setUp();

		Response  response =	given().
				queryParam("api_key", getProperty("APIKey")).
				queryParam("language", "en").expect().statusCode(200).
				when().
				get(popularMovieUri);
	
		JsonPath jsonPath = response.jsonPath();
		
		Assert.assertEquals(response.getStatusCode(),HttpStatus.SC_OK, "status code was not Httpstatus.SC_OK");
	}
	
	/*
	 * public void init(String profileDirectory) throws LangDetectException {
	 * DetectorFactory.loadProfile(profileDirectory); }
	 * 
	 * public String detect(String text) throws LangDetectException { Detector
	 * detector = DetectorFactory.create(); detector.append(text); return
	 * detector.detect(); }
	 * 
	 * public ArrayList detectLangs(String text) throws LangDetectException {
	 * Detector detector = DetectorFactory.create(); detector.append(text); return
	 * detector.getProbabilities(); }
	 */

	
}
